<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIS BCW - ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏π</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #1e56a0; --bg: #f3f5f9; }
        body { font-family: 'Prompt', sans-serif; background-color: var(--bg); margin: 0; padding: 0; padding-bottom: 80px; }
        
        .navbar { background: var(--primary); color: white; padding: 15px; position: sticky; top: 0; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
        .container { max-width: 900px; margin: 20px auto; padding: 0 15px; }
        .page { display: none; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        .card { background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
        
        /* ‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
        .nav-menu { position: fixed; bottom: 0; width: 100%; background: white; display: none; justify-content: space-around; padding: 10px 0; border-top: 1px solid #ddd; z-index: 1000;}
        .nav-item { text-align: center; font-size: 13px; color: #64748b; cursor: pointer; flex: 1; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 2px; }

        /* ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà) */
        .toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;}
        .date-picker { padding: 8px; border: 1px solid #ccc; border-radius: 8px; font-family: 'Prompt'; font-size: 16px; }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ï‡∏≤‡∏£‡∏≤‡∏á/‡πÅ‡∏ñ‡∏ß‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠ */
        .student-row { display: flex; flex-direction: column; background: #fff; border: 1px solid #e2e8f0; border-radius: 10px; padding: 15px; margin-bottom: 15px; transition: 0.3s; }
        .student-info { display: flex; align-items: center; margin-bottom: 10px; }
        .student-number { font-size: 18px; font-weight: bold; color: #64748b; width: 40px; text-align: center; }
        
        /* ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û */
        .img-container { position: relative; width: 60px; height: 60px; margin-right: 15px; }
        .student-img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 2px solid #ddd; }
        .upload-btn { position: absolute; bottom: -5px; right: -5px; background: var(--primary); color: white; border: none; border-radius: 50%; width: 25px; height: 25px; font-size: 12px; cursor: pointer; display: flex; justify-content: center; align-items: center;}
        
        .student-name { flex-grow: 1; font-size: 16px; font-weight: 600; color: #15283c; }
        
        /* ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ */
        .status-group { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 10px;}
        .btn-status { flex: 1; padding: 8px 5px; border: 1px solid #ddd; border-radius: 6px; background: white; cursor: pointer; font-family: 'Prompt'; font-size: 14px; transition: 0.2s; text-align: center; font-weight: bold; color: #666;}
        
        /* ‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ */
        .behavior-note { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Prompt'; font-size: 13px; box-sizing: border-box; resize: vertical; min-height: 40px;}
        
        /* ‡πÇ‡∏ó‡∏ô‡∏™‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ */
        .status-present.active { background-color: #28a745; color: white; border-color: #28a745; }
        .status-sick.active { background-color: #dc3545; color: white; border-color: #dc3545; }
        .status-leave.active { background-color: #ffc107; color: #000; border-color: #ffc107; }
        .status-absent.active { background-color: #fd7e14; color: white; border-color: #fd7e14; }

        /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ñ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
        .row-present { background-color: #e8f5e9; border-left: 6px solid #28a745; }
        .row-sick { background-color: #ffebee; border-left: 6px solid #dc3545; }
        .row-leave { background-color: #fff8e1; border-left: 6px solid #ffc107; }
        .row-absent { background-color: #fff3e0; border-left: 6px solid #fd7e14; }

        .save-btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; font-family: 'Prompt'; margin-top: 10px;}
        
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 14px; }
        th, td { padding: 10px; border-bottom: 1px solid #eee; text-align: left; }
        th { background: #f8f9fa; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="navbar">
    <div style="font-weight: bold;">üè´ SIS ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤</div>
    <div id="user-display" style="font-size: 12px; cursor: pointer;" onclick="logout()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</div>
</div>

<div class="container">
    
    <div id="login-page" class="page active">
        <div class="card" style="text-align: center; max-width: 400px; margin: 40px auto;">
            <h2 style="color: #1e56a0;">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <input type="text" id="username" style="width: 100%; padding: 12px; margin-bottom: 15px; box-sizing: border-box; border-radius: 8px; border: 1px solid #ccc; font-family: 'Prompt';" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏£‡∏π (‡∏û‡∏¥‡∏°‡∏û‡πå admin)">
            <input type="password" id="password" style="width: 100%; padding: 12px; margin-bottom: 15px; box-sizing: border-box; border-radius: 8px; border: 1px solid #ccc; font-family: 'Prompt';" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏û‡∏¥‡∏°‡∏û‡πå 1234)">
            <button onclick="handleLogin()" style="width: 100%; padding: 12px; background: #1e56a0; color: white; border: none; border-radius: 8px; font-size: 16px; font-family: 'Prompt'; cursor: pointer;">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
    </div>

    <div id="checklist-page" class="page">
        <div class="toolbar">
            <h2 style="margin: 0;">üìù ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ñ‡∏ß</h2>
            <input type="date" id="check-date" class="date-picker">
        </div>

        <div id="student-list-container">
            </div>

        <button class="save-btn" onclick="saveAttendance()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>

    <div id="daily-page" class="page">
        <div class="card">
            <h2>üìÖ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h2>
            <p style="color: #666; font-size: 13px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô</p>
            <input type="date" id="view-date" class="date-picker" style="margin-bottom: 15px;" onchange="loadDailyData()">
            
            <table id="daily-table">
                <thead>
                    <tr><th>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</th><th>‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th></tr>
                </thead>
                <tbody id="daily-body">
                    </tbody>
            </table>
        </div>
    </div>

    <div id="summary-page" class="page">
        <div class="card">
            <h2>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)</h2>
            <p style="color: #666; font-size: 13px;">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ß‡πà‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô ‡∏Ç‡∏≤‡∏î/‡∏•‡∏≤/‡∏õ‡πà‡∏ß‡∏¢ ‡∏Å‡∏µ‡πà‡∏ß‡∏±‡∏ô</p>
            
            <table id="summary-table">
                <thead>
                    <tr>
                        <th>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</th>
                        <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th>
                        <th style="color: #28a745;">‡∏°‡∏≤</th>
                        <th style="color: #dc3545;">‡∏õ‡πà‡∏ß‡∏¢</th>
                        <th style="color: #ffc107;">‡∏•‡∏≤</th>
                        <th style="color: #fd7e14;">‡∏Ç‡∏≤‡∏î</th>
                    </tr>
                </thead>
                <tbody id="summary-body">
                    </tbody>
            </table>
        </div>
    </div>

</div>

<div class="nav-menu" id="bottom-nav">
    <div class="nav-item active" onclick="switchPage('checklist-page', this)">
        <span>üìù</span><br>‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠
    </div>
    <div class="nav-item" onclick="switchPage('daily-page', this)">
        <span>üìÖ</span><br>‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
    </div>
    <div class="nav-item" onclick="switchPage('summary-page', this)">
        <span>üìä</span><br>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•
    </div>
</div>

<script>
    // --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏´‡πâ Date Picker ---
    document.getElementById('check-date').valueAsDate = new Date();
    document.getElementById('view-date').valueAsDate = new Date();

    // --- ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ---
    let students = [
        { id: "6326", number: 1, name: "‡∏î.‡∏ä.‡∏à‡∏≤‡∏£‡∏∏‡∏Å‡∏£ ‡∏´‡∏á‡∏™‡πå‡∏™‡∏¥‡∏á‡∏´‡πå", img: "https://ui-avatars.com/api/?name=‡∏à‡∏≤‡∏£‡∏∏‡∏Å‡∏£&background=f3f5f9" },
        { id: "6329", number: 2, name: "‡∏î.‡∏ä.‡∏à‡∏¥‡∏£‡∏≤‡∏¢‡∏∏‡∏™ ‡∏ô‡∏≤‡∏°‡∏™‡∏ô", img: "https://ui-avatars.com/api/?name=‡∏à‡∏¥‡∏£‡∏≤‡∏¢‡∏∏‡∏™&background=f3f5f9" },
        { id: "6348", number: 3, name: "‡∏î.‡∏ä.‡∏ß‡∏±‡∏ô‡∏ä‡∏±‡∏¢ ‡πÅ‡∏û‡∏á‡∏ß‡∏¥‡πÄ‡∏®‡∏©", img: "https://ui-avatars.com/api/?name=‡∏ß‡∏±‡∏ô‡∏ä‡∏±‡∏¢&background=f3f5f9" }
    ];

    // ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏Ç‡∏ì‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠
    let attendanceData = {}; 

    // --- üîê ‡∏£‡∏∞‡∏ö‡∏ö Login (‡∏à‡∏≥‡∏•‡∏≠‡∏á) ---
    function handleLogin() {
        const u = document.getElementById('username').value;
        const p = document.getElementById('password').value;
        if (u === "admin" && p === "1234") {
            document.getElementById('user-display').innerText = "‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏Ñ‡∏£‡πÄ‡∏î‡∏ä (‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö)";
            document.getElementById('bottom-nav').style.display = 'flex';
            switchPage('checklist-page', document.querySelectorAll('.nav-item')[0]);
            renderChecklist(); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠
            loadSummaryData(); // ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ
        } else {
            alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        }
    }

    function logout() {
        document.getElementById('user-display').innerText = "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö";
        document.getElementById('bottom-nav').style.display = 'none';
        switchPage('login-page', null);
    }

    // --- üß≠ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ---
    function switchPage(pageId, element) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        if(element) {
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            element.classList.add('active');
        }
        document.getElementById(pageId).classList.add('active');
    }

    // --- üìù 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏µ ---
    function renderChecklist() {
        const container = document.getElementById('student-list-container');
        container.innerHTML = "";

        students.forEach(std => {
            // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠ '‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô' (present)
            attendanceData[std.id] = { status: 'present', note: '' };

            let row = document.createElement('div');
            row.className = `student-row row-present`; // ‡∏™‡∏µ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
            row.id = `row-${std.id}`;

            row.innerHTML = `
                <div class="student-info">
                    <div class="student-number">${std.number}</div>
                    
                    <div class="img-container">
                        <img src="${std.img}" id="img-${std.id}" class="student-img">
                        <label class="upload-btn">
                            üì∑
                            <input type="file" accept="image/*" style="display:none;" onchange="previewImage(event, '${std.id}')">
                        </label>
                    </div>

                    <div class="student-name">${std.name}</div>
                </div>

                <div class="status-group">
                    <div class="btn-status status-present active" onclick="setStatus('${std.id}', 'present')">‚úÖ ‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
                    <div class="btn-status status-sick" onclick="setStatus('${std.id}', 'sick')">ü§í ‡∏õ‡πà‡∏ß‡∏¢</div>
                    <div class="btn-status status-leave" onclick="setStatus('${std.id}', 'leave')">üìù ‡∏•‡∏≤</div>
                    <div class="btn-status status-absent" onclick="setStatus('${std.id}', 'absent')">‚ùå ‡∏Ç‡∏≤‡∏î</div>
                </div>

                <textarea class="behavior-note" id="note-${std.id}" placeholder="‡∏à‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°/‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏... (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)"></textarea>
            `;
            container.appendChild(row);
        });
    }

    // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏µ ---
    function setStatus(id, status) {
        attendanceData[id].status = status;
        let row = document.getElementById(`row-${id}`);
        
        // ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ñ‡∏ß‡πÄ‡∏Å‡πà‡∏≤ ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏™‡∏µ‡πÉ‡∏´‡∏°‡πà
        row.className = `student-row row-${status}`;

        // ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ active ‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡∏ô‡∏µ‡πâ
        let buttons = row.querySelectorAll('.btn-status');
        buttons.forEach(btn => btn.classList.remove('active'));

        // ‡πÉ‡∏™‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ active ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Å‡∏î
        row.querySelector(`.status-${status}`).classList.add('active');
    }

    // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ---
    function previewImage(event, id) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById(`img-${id}`).src = e.target.result;
                // ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ã‡∏ü‡∏£‡∏π‡∏õ ‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á e.target.result (Base64) ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Database
            }
            reader.readAsDataURL(file);
        }
    }

    // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ---
    function saveAttendance() {
        let date = document.getElementById('check-date').value;
        let finalData = [];
        
        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡∏î‡πâ‡∏ß‡∏¢
        students.forEach(std => {
            let note = document.getElementById(`note-${std.id}`).value;
            finalData.push({
                date: date,
                id: std.id,
                name: std.name,
                status: attendanceData[std.id].status,
                note: note
            });
        });

        console.log("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö:", finalData);
        alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà " + date + " ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n(‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏π‡πÉ‡∏ô Console ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á)");
        
        // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô" ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        loadDailyData(finalData); 
    }

    // --- üìÖ 2. ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô ---
    function loadDailyData(mockData = null) {
        // ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á ‡∏à‡∏∞‡∏¢‡∏¥‡∏á fetch() ‡πÑ‡∏õ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å Google Sheets ‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
        let tbody = document.getElementById('daily-body');
        tbody.innerHTML = "";
        
        if(mockData) {
            mockData.forEach((d, index) => {
                let statusTh = d.status === 'present' ? '<span style="color:green">‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span>' : 
                               d.status === 'sick' ? '<span style="color:red">‡∏õ‡πà‡∏ß‡∏¢</span>' :
                               d.status === 'leave' ? '<span style="color:#ffc107">‡∏•‡∏≤</span>' : '<span style="color:orange">‡∏Ç‡∏≤‡∏î</span>';
                
                tbody.innerHTML += `<tr>
                    <td>${index + 1}</td>
                    <td>${d.name}</td>
                    <td><b>${statusTh}</b></td>
                    <td style="color:#666; font-size:12px;">${d.note || '-'}</td>
                </tr>`;
            });
        } else {
            tbody.innerHTML = "<tr><td colspan='4' style='text-align:center;'>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á</td></tr>";
        }
    }

    // --- üìä 3. ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ---
    function loadSummaryData() {
        // ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á ‡∏à‡∏∞‡∏¢‡∏¥‡∏á API ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏≤‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
        let tbody = document.getElementById('summary-body');
        tbody.innerHTML = "";
        
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á
        students.forEach(std => {
            tbody.innerHTML += `<tr>
                <td>${std.number}</td>
                <td>${std.name}</td>
                <td style="color: #28a745; font-weight:bold;">10</td> <td style="color: #dc3545;">0</td>
                <td style="color: #ffc107;">1</td>
                <td style="color: #fd7e14;">0</td>
            </tr>`;
        });
    }
</script>

</body>
</html>
